<!DOCTYPE html>
<html lang="en">
<head>
    <title>Vim: complete C++ accurately, pulling informations from the compiler, with gccsense and clang_complete</title>
    <meta charset="utf-8" />
    <link href="http://blog.chmd.fr/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ch-M.D Full Atom Feed" />
    <link href="http://blog.chmd.fr/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Ch-M.D Categories Atom Feed" />
    <link rel="stylesheet" href="theme/css/rdark.css" />
    <link rel="stylesheet" type="text/css" href="theme/css/main.css" />
</head>

<body id="index" class="home">
    <header id="banner" class="body">
        <h1><a href="http://blog.chmd.fr">Ch-M.D <strong></strong></a></h1>
    </header><!-- /#banner -->
<section id="content" class="body">
<header>
    <h1 class="entry-title">
        <a href="vim-complete-c-accurately-pulling-informations-from-the-compiler-with-gccsense-and-clang_complete.html" rel="bookmark" title="Permalink to Vim: complete C++ accurately, pulling informations from the compiler, with gccsense and clang_complete">
                Vim: complete C++ accurately, pulling informations from the compiler, with gccsense and clang_complete
        </a>
    </h1>
</header>
<article>
    <div class="entry-content">
    <p>It has been a while since I first dreamt about a reliable way to complete
C++ code within vim. Sure, there was omnicppcomplete, which was able to
complete more or less accurately from ctags databases, but the quality of
the completion was greatly dependent on your coding style (I never could
get myself used to put all my methods declarations on the same line).
What we missed was a clever completion plugin, something that would be
able to look deep inside the code, to resolve the types of the object you
are refering to and to provide the set of accurate methods. Actually, we
needed a plugin that would have the same knowledge the compiler has. That
is a huge task, which is probably the reason why it has been let aside for
so long.  But recently, almost at the same time, two plugins have
appeared, based on this idea.</p>
<p>The first plugin, clang_complete, uses a feature from the compiler
clang++, from the llvm project. This new C++ compiler aims at being as
reliable as g++. Though as far as I know, it is still not ready for
production, it recently compiled boost, so expect to hear about it again.
clang++ features the ability to complete a given line of code from the
command line, and our first plugin is based on this feature: see
<a href="http://www.vim.org/scripts/script.php?script_id=3302">http://www.vim.org/scripts/script.php?script</a> for more information.</p>
<p>The second plugin is based on a crazy gcc modification called
gcc-code-assist. The author has hacked in gcc's code and provides a
replacement for gcc that also builds a sqlite database at the same time
you build your code with it. Then a command line tool called gccsense
allows to query this database.  Basically, you just replace gcc with
gcc-code-assist in your makefile, and you install the plugin provided on
the author's website: <a href="http://cx4a.org/software/gccsense/">http://cx4a.org/software/gccsense/</a>.  The
modified gcc is really easy to compile, I even made a package for
archlinux that you can find on AUR. Obviously, this stuff is very unlikely
to make it to gcc's upstream...</p>
<p>So, what to use?  Well, if clang++ builds your project without errors, I'd
go for it, because this is for sure a feature that will continue to be
maintained by the llvm crew. Otherwise, gccsense should work exactly like
gcc-4.4. Honestly, I did not have the chance to really test any of them,
so it will be difficult to provide good feedback for me. If someone has
the opportunity to test it, please leave a comment!</p>
    </div>
    <div class="comments">
        <h2>Comments !</h2>
        <!-- hack to add flattr -->
        <script id='fbnrl3e'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=chmd&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbnrl3e');</script>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_identifier = "vim-complete-c-accurately-pulling-informations-from-the-compiler-with-gccsense-and-clang_complete.html";
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//chmd.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        </div>
</article>
</section>
    <footer id="contentinfo" class="body">
        <address id="about" class="vcard body">
        Generated by <a href="http://getpelican.com/">pelican</a>,
        theme <a href="https://github.com/chmduquesne/small">small</a>
        </address><!-- /#about -->
    </footer><!-- /#contentinfo -->
</body>
</html>