<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ch-M.D</title>
    <meta name="description" content="">
    <meta name="author" content="Tof">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://blog.chmd.fr/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <link href="http://blog.chmd.fr/theme/local.css" rel="stylesheet">
    <link href="http://blog.chmd.fr/theme/pygments.css" rel="stylesheet">
    <link href="http://blog.chmd.fr/theme/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Gudea:400,400italic|Alegreya+SC' rel='stylesheet' type='text/css'>
</head>

<body>
<header class="blog-header">
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
	<a href="http://blog.chmd.fr" class="brand">Ch-M.D</a>
      </div>

      <div class="span3" id="blog-nav">
	<ul class="nav nav-pills pull-right">
	                        	   	    <li >
	      <a href="http://blog.chmd.fr/category/code.html ">code</a>
	   	    <li >
	      <a href="http://blog.chmd.fr/category/howto.html ">howto</a>
	   	    <li >
	      <a href="http://blog.chmd.fr/category/misc.html ">misc</a>
	   	</ul>
      </div>
    </div> <!-- End of fluid row-->
  </div>   <!-- End of Container-->
</header>
    
<div class="container">
    <div class="content">
    <div class="row-fluid">

        <div class="span10">
                

        

    <div class='row-fluid''>
        <div class="article-title span9">
            <a href="http://blog.chmd.fr/autotools-doxygen-et-generation-conditionnelle.html"><h1>autotools, doxygen, et génération conditionnelle</h1></a>
        </div>
    </div>
    <div class="row-fluid">
      <div class="span2">
	<p>Fri 10 July 2009 </p>

<p style="text-align: left;">
Filed under <a href="http://blog.chmd.fr/category/code.html">code</a>
</p>
<p style="text-align: left;">
 
    Tags <a href="http://blog.chmd.fr/tag/autotools.html">autotools</a> <a href="http://blog.chmd.fr/tag/doxygen.html">doxygen</a> <a href="http://blog.chmd.fr/tag/libre.html">libre</a> </p>
<p>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="chmduquesne">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</p>
      </div>
      <div class="article-content span8">
	<p>On m'a donné une astuce bien sympa pour générer de la documentation
de manière conditionnelle avec doxygen. J'utilise ça dans le projet
que je code au boulot, et je pense que ça vaut le coup de partager.
L'idée est de générer la  documentation automatiquement à chaque
compilation de mon projet, en faisant appel aux features avancées
de doxygen en fonction des outils dont dispose l'utilisateur : dot,
htags, perl, etc... On va donc vérifier quels programmes sont
présents grâce au configure.ac, et on va générer le doxyfile en
fonction desquels sont présents. L'exemple que je donne n'est pas
complet, mais vous pouvez vous en inspirer: Fichier configure.ac</p>
<div class="highlight"><pre><span class="n">AC_CHECK_PROG</span><span class="p">([</span><span class="n">DOT</span><span class="p">],</span> <span class="p">[</span><span class="n">dot</span><span class="p">],</span> <span class="p">[</span><span class="n">yes</span><span class="p">],</span> <span class="p">[</span><span class="n">no</span><span class="p">])</span>
<span class="n">AC_CHECK_PROG</span><span class="p">([</span><span class="n">HTAGS</span><span class="p">],</span> <span class="p">[</span><span class="n">htags</span><span class="p">],</span> <span class="p">[</span><span class="n">yes</span><span class="p">],</span> <span class="p">[</span><span class="n">no</span><span class="p">])</span>
<span class="n">AC_PATH_PROG</span><span class="p">([</span><span class="n">PERL</span><span class="p">],</span> <span class="p">[</span><span class="n">perl</span><span class="p">],</span> <span class="p">[])</span>
<span class="n">AM_CONDITIONAL</span><span class="p">([</span><span class="n">DOXYGEN</span><span class="p">],</span> <span class="p">[</span><span class="n">test</span> <span class="s">&quot;x$doxygen_ok&quot;</span> <span class="o">=</span> <span class="n">xyes</span><span class="p">])</span>
<span class="n">AM_CONDITIONAL</span><span class="p">([</span><span class="n">DOT</span><span class="p">],</span> <span class="p">[</span><span class="n">test</span> <span class="s">&quot;x$dot_ok&quot;</span> <span class="o">=</span> <span class="n">xyes</span><span class="p">])</span>

<span class="n">AC_CONFIG_FILES</span><span class="p">(</span>
    <span class="n">doc</span><span class="o">/</span><span class="n">doxygen_html</span><span class="p">.</span><span class="n">cfg</span>
<span class="p">)</span>
</pre></div>


<p>Ensuite, il suffit de glisser les bonnes références dans le fichier
doc/doxygen_html.cfg.in :</p>
<div class="highlight"><pre><span class="n">USE_HTAGS</span>              <span class="o">=</span> <span class="err">@</span><span class="n">HTAGS</span><span class="err">@</span>
<span class="n">PERL_PATH</span>              <span class="o">=</span> <span class="err">@</span><span class="n">PERL</span><span class="err">@</span>
<span class="n">HAVE_DOT</span>               <span class="o">=</span> <span class="err">@</span><span class="n">DOT</span><span class="err">@</span>
</pre></div>


<p>Ainsi, après l'appel de ./configure, le fichier doxygen_html.cfg
va être généré, et les expressions entre @ vont y être remplacées
par les bonnes valeurs. Vous pourrez ensuite vous servir de ce
fichier pour véritablement générer la doc...</p> 
	<a class="btn btn-mini xsmall" href="http://blog.chmd.fr/autotools-doxygen-et-generation-conditionnelle.html">
          <i class="icon-comment"></i> Comment </a>
	<hr />
      </div>
      
    </div>
    
            <div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="http://blog.chmd.fr/tag/autotools.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>    
 
  
        </div>
        
        
    </div>     </div> </div>

<!--footer-->
<div class="container">
  <div class="well" style="background-color: #E9EFF6">
    <div id="blog-footer">
      <div class="row-fluid">
		<div class="social span2" align="center" id="socialist">
	  <ul class="nav nav-list">
	    <li class="nav-header">
	      Social
	    </li>
	    	    <li><a href="https://twitter.com/#!chmduquesne"><i class="icon-twitter" style="color: #1f334b"></i>twitter</a></li>
	    	    <li><a href="http://resume.chmd.fr"><i class="icon-resume" style="color: #1f334b"></i>resume</a></li>
	                
	  </ul>
	</div>
		        	<div class="site-nav span2" align="center">
          <ul class="nav nav-list" id="site-links">
            <li class="nav-header"> 
              Site
            </li>
            <li><a href="http://blog.chmd.fr"><i class="icon-home" style="color: #1f334b">
                </i>Home</a></li>
            <li><a href="http://blog.chmd.fr/archives.html"><i class="icon-list" style="color: #1f334b">
                </i>Archives</a></li>
	    <li><a href="http://blog.chmd.fr/tags.html"><i class="icon-tags" style="color: #1f334b">
                </i>Tags</a></li>
	    
	                <li><a href="http://blog.chmd.fr/" rel="alternate">
                <i class="icon-rss-sign" style="color: #1f334b"></i>
                Atom Feed</a></li>
	  </ul>

        </div>

      </div> <!--end of fluid row-->
    </div> <!--end of blog-footer-->
    <hr />
    <p align="center"><a href="http://blog.chmd.fr">Ch-M.D</a>
      &copy; Tof
    Powered by <a href="github.com/getpelican/pelican">Pelican</a> and
        <a href="https://twitter.github.com/bootstrap">Twitter Bootstrap</a>. 
        Icons by <a href="http://fortawesome.github.com/Font-Awesome">Font Awesome</a> and 
        <a href="http://gregoryloucas.github.com/Font-Awesome-More">Font Awesome More</a></p>

  </div> <!--end of well -->
</div> <!--end of container -->

<!--/footer-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>


<script>var _gaq=[['_setAccount','UA-17659080-3'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>

</body>
</html>