<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ch-M.D</title>
    <meta charset="utf-8" />
    <link href="http://blog.chmd.fr/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Ch-M.D Full Atom Feed" />
    <link rel="stylesheet" href="theme/css/rdark.css" />
    <link rel="stylesheet" type="text/css" href="theme/css/main.css" />
</head>

<body id="index" class="home">
    <header id="banner" class="body">
        <h1><a href="http://blog.chmd.fr">Ch-M.D <strong></strong></a></h1>
    </header><!-- /#banner -->
<section id="content">

                <header>
                    <h1><a href="self-archiving-emails.html"
                            id="page-title">Self-Archiving Emails</a></h1>
                        <time datetime="2025-08-19T19:00:00+02:00">Tue 19 August 2025</time>
                </header>
                <article>
                    <p>The concept of Inbox Zero has been around since 2007, and we can thank
Merlin Mann for popularizing it. If you have not watched the
<a href="https://www.youtube.com/watch?v=z9UjeTMb3Yk">presentation</a>, I highly recommend doing it, because it is still
relevant in 2025.</p>
<p>For the past 3 years, I have been running an automation which I now
consider essential to keeping my inbox tidy. I call it <em>self-archiving
emails</em>. The concept is simple: if an email has been sitting in my inbox
for long enough (and for me, that's currently 8 months), I will probably
never do anything about it. So it might as well archive itself. In
practice, 8 months is a worst-case scenario, because a lot of the emails I
receive are only interesting for a few days. The expiration date is set on
a case by case situation, using regular email rules.</p>
<h2>Gmail implementation</h2>
<p>I am leveraging labels to implement this strategy. My flow is as follows:
using basic filters, I label every incoming email with one of the
following: <code>archive-1d</code>, <code>archive-3d</code>, <code>archive-7d</code>, <code>archive-1m</code>,
<code>archive-2m</code>, <code>archive-4m</code> or <code>archive-ifread</code>. Every hour, a script
archives every message which sits in my inbox and is older than what the
label indicates.</p>
<p>The script runs as a google apps script:</p>
<div class="highlight"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// find all the archive-xx labels</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">GmailApp</span><span class="p">.</span><span class="nx">getUserLabels</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">label</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">label</span><span class="p">.</span><span class="nx">getName</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">name</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s2">&quot;archive-&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;archive-xx&quot;</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// archive all the expired emails according to their respective labels</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">labels</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">label</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mf">1</span><span class="p">];</span>
<span class="w">    </span><span class="nx">archive</span><span class="p">(</span><span class="s2">&quot;in:inbox label:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; older_than:&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">duration</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// archive anything older than 8m</span>
<span class="w">  </span><span class="nx">archive</span><span class="p">(</span><span class="s2">&quot;in:inbox older_than:8m&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// archive emails which have no value once I have seen them</span>
<span class="w">  </span><span class="nx">archive</span><span class="p">(</span><span class="s2">&quot;in:inbox is:read label:archive-ifread&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">archive</span><span class="p">(</span><span class="nx">search</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;archiving: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">search</span><span class="p">)</span>

<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">GmailApp</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">search</span><span class="p">);</span>

<span class="w">  </span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;found &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">threads</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; threads:&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="kd">var</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">threads</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="kd">var</span><span class="w"> </span><span class="nx">thread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">threads</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
<span class="w">   </span><span class="nx">Logger</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;. &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">thread</span><span class="p">.</span><span class="nx">getFirstMessageSubject</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nx">threads</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">this_batch_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">threads</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span><span class="w"> </span><span class="nx">batch_size</span><span class="p">);</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">this_batch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">threads</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">this_batch_size</span><span class="p">);</span>
<span class="w">    </span><span class="nx">GmailApp</span><span class="p">.</span><span class="nx">moveThreadsToArchive</span><span class="p">(</span><span class="nx">this_batch</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>There are already plenty of google apps scripts tutorials, so I will not
go into the details of deploying this script, but it roughly involves
going to <a href="https://script.google.com">script.google.com</a>, pasting this code into a new project and
setting the function <code>run</code> to trigger every hour. I am sure you will
figure this out.</p>
<h2>Office 365</h2>
<p>My workplace uses office 365, but that did not stop me from implementing
the same logic using MS powerflows. It is, however, massively ugly, so I
will not share it here. If you are interested in how to do it, send me an
email, I may post another article about it if this is a popular request.</p>
<h2>Feedback</h2>
<p>I have been running this automation for more than 3 years already. It
works. I can report that this concept of self-archiving emails has
drastically reduced the size of my inbox, to the point that I could not
imagine living without it. Surprisingly, I am the only person I know who
runs such an automation. I discussed about it with some friends the other
day, and because this generated some interest, I decided to share it here.
If you end up using it as well, feel free to shoot me an email, and if you
promote this approach to others, please credit me 😉</p>
                </article>
                <a href="self-archiving-emails.html#disqus_thread">
                    To the comments
                </a>
                <section id="article-list">
                    <h2>All posts</h2>
                    <ol>
                <li><a href="scripting-sudo-with-pass.html" rel="bookmark" title="Permalink to Scripting sudo with pass">Scripting sudo with pass</a></li>
                <li><a href="looping-simultaneously-over-multiple-lists-in-legacy-shells.html" rel="bookmark" title="Permalink to Looping simultaneously over multiple lists in legacy shells">Looping simultaneously over multiple lists in legacy shells</a></li>
                <li><a href="ssh-over-ssl-episode-4-a-haproxy-based-configuration.html" rel="bookmark" title="Permalink to SSH over SSL, episode 4: a HAproxy based configuration">SSH over SSL, episode 4: a HAproxy based configuration</a></li>
                <li><a href="editing-a-cv-in-markdown-with-pandoc.html" rel="bookmark" title="Permalink to Editing a CV in markdown with pandoc">Editing a CV in markdown with pandoc</a></li>
                <li><a href="using-openid-and-the-likes-to-protect-static-content-lighttpd.html" rel="bookmark" title="Permalink to Using openid and the likes to protect static content (lighttpd)">Using openid and the likes to protect static content (lighttpd)</a></li>
                <li><a href="git-on-lighttpd.html" rel="bookmark" title="Permalink to Git on lighttpd">Git on lighttpd</a></li>
                <li><a href="sigal-a-static-gallery-generator.html" rel="bookmark" title="Permalink to Sigal, a static gallery generator">Sigal, a static gallery generator</a></li>
                <li><a href="jabber-notifications-on-ssh-login.html" rel="bookmark" title="Permalink to Jabber notifications on ssh login">Jabber notifications on ssh login</a></li>
                <li><a href="choose-your-passphrase-with-a-die.html" rel="bookmark" title="Permalink to Choose your passphrase with a die">Choose your passphrase with a die</a></li>
                <li><a href="operations-research-and-beer-drinking.html" rel="bookmark" title="Permalink to Operations Research and Beer drinking">Operations Research and Beer drinking</a></li>
                <li><a href="releasing-michel-a-flat-text-file-to-google-tasks-uploader.html" rel="bookmark" title="Permalink to Releasing Michel, a flat-text-file-to-google-tasks uploader">Releasing Michel, a flat-text-file-to-google-tasks uploader</a></li>
                <li><a href="going-static.html" rel="bookmark" title="Permalink to Going static">Going static</a></li>
                <li><a href="plowbot-a-jabber-bot-that-downloads-links-from-1-click-hosters.html" rel="bookmark" title="Permalink to plowbot, a jabber bot that downloads links from 1-click hosters">plowbot, a jabber bot that downloads links from 1-click hosters</a></li>
                <li><a href="ssh-over-ssl-episode-3-avoiding-using-a-patched-apache.html" rel="bookmark" title="Permalink to SSH over SSL, episode 3: Avoiding using a patched apache.">SSH over SSL, episode 3: Avoiding using a patched apache.</a></li>
                <li><a href="je-prefere-ton-clone-padopi.html" rel="bookmark" title="Permalink to [Je préfère ton clone] padopi">[Je préfère ton clone] padopi</a></li>
                <li><a href="using-a-shell-version-of-supergenpass-from-vimperatorpentadactyl.html" rel="bookmark" title="Permalink to Using a shell version of supergenpass from vimperator/pentadactyl">Using a shell version of supergenpass from vimperator/pentadactyl</a></li>
                <li><a href="saving-your-crontab-in-your-dotfiles.html" rel="bookmark" title="Permalink to Saving your crontab in your dotfiles">Saving your crontab in your dotfiles</a></li>
                <li><a href="notifications-from-google-calendar-on-my-desktop.html" rel="bookmark" title="Permalink to Notifications from google calendar on my desktop">Notifications from google calendar on my desktop</a></li>
                <li><a href="ssh-over-ssl-episode-2-replacing-proxytunnel-with-socat.html" rel="bookmark" title="Permalink to SSH over SSL, episode 2: replacing proxytunnel with socat">SSH over SSL, episode 2: replacing proxytunnel with socat</a></li>
                <li><a href="ssh-over-ssl-a-quick-and-minimal-config.html" rel="bookmark" title="Permalink to SSH over SSL, a quick and minimal config.">SSH over SSL, a quick and minimal config.</a></li>
                <li><a href="vim-complete-c-accurately-pulling-informations-from-the-compiler-with-gccsense-and-clang_complete.html" rel="bookmark" title="Permalink to Vim: complete C++ accurately, pulling informations from the compiler, with gccsense and clang_complete">Vim: complete C++ accurately, pulling informations from the compiler, with gccsense and clang_complete</a></li>
                <li><a href="google-releasing-a-constraint-programming-library.html" rel="bookmark" title="Permalink to Google releasing a constraint programming library">Google releasing a constraint programming library</a></li>
                <li><a href="mise-a-jour-de-talkmyphone.html" rel="bookmark" title="Permalink to Mise à jour de TalkMyPhone">Mise à jour de TalkMyPhone</a></li>
                <li><a href="talkmyphone-une-appli-android-pour-recevoir-des-notifications-de-son-telephone.html" rel="bookmark" title="Permalink to TalkMyPhone, une appli android pour recevoir des notifications de son téléphone">TalkMyPhone, une appli android pour recevoir des notifications de son téléphone</a></li>
                <li><a href="de-linteret-de-detacher-des-programmes-de-la-console-sans-screen.html" rel="bookmark" title="Permalink to De l'intérêt de détacher des programmes de la console (sans screen)">De l'intérêt de détacher des programmes de la console (sans screen)</a></li>
                <li><a href="renaming-files-and-variables-from-vim.html" rel="bookmark" title="Permalink to renaming files and variables from vim">renaming files and variables from vim</a></li>
                <li><a href="continuous-background-compilation-within-vim.html" rel="bookmark" title="Permalink to Continuous background compilation within vim">Continuous background compilation within vim</a></li>
                <li><a href="utilisons-incron-pour-etre-notifies-des-evenements-du-systeme-de-fichiers.html" rel="bookmark" title="Permalink to Utilisons incron pour être notifiés des événements du système de fichiers">Utilisons incron pour être notifiés des événements du système de fichiers</a></li>
                <li><a href="la-todo-liste-du-pauvre.html" rel="bookmark" title="Permalink to La TODO liste du pauvre">La TODO liste du pauvre</a></li>
                <li><a href="gerer-ses-plugins-vim-avec-getlatestvimscripts.html" rel="bookmark" title="Permalink to Gérer ses plugins vim avec :GetLatestVimScripts">Gérer ses plugins vim avec :GetLatestVimScripts</a></li>
                <li><a href="gdb-70-est-sorti-cest-une-merveille-et-vous-ne-le-saviez-pas.html" rel="bookmark" title="Permalink to gdb 7.0 est sorti, c'est une merveille et vous ne le saviez pas.">gdb 7.0 est sorti, c'est une merveille et vous ne le saviez pas.</a></li>
                <li><a href="autotools-doxygen-et-generation-conditionnelle.html" rel="bookmark" title="Permalink to autotools, doxygen, et génération conditionnelle">autotools, doxygen, et génération conditionnelle</a></li>
                <li><a href="mettre-des-couleurs-un-peu-partout-gcc-diff-grep.html" rel="bookmark" title="Permalink to Mettre des couleurs un peu partout (gcc, diff, grep...)">Mettre des couleurs un peu partout (gcc, diff, grep...)</a></li>
                <li><a href="vimgdbvimgdb.html" rel="bookmark" title="Permalink to vim+gdb=vimgdb">vim+gdb=vimgdb</a></li>
                <li><a href="luml-automatise-et-le-libre-cest-pas-gagne.html" rel="bookmark" title="Permalink to l'UML automatisé et le libre : c'est pas gagné!">l'UML automatisé et le libre : c'est pas gagné!</a></li>
                <li><a href="les-lecteurs-de-flux-rss-en-ligne-independants-libres-suite.html" rel="bookmark" title="Permalink to Les lecteurs de flux rss, en ligne, indépendants, libres (suite).">Les lecteurs de flux rss, en ligne, indépendants, libres (suite).</a></li>
                <li><a href="les-lecteurs-de-flux-rss-en-ligne-libres.html" rel="bookmark" title="Permalink to Les lecteurs de flux rss en ligne libres">Les lecteurs de flux rss en ligne libres</a></li>
                <li><a href="couper-une-video-et-extraire-une-scene-dun-film.html" rel="bookmark" title="Permalink to Couper une vidéo et extraire une scène d'un film">Couper une vidéo et extraire une scène d'un film</a></li>
                <li><a href="faire-un-gif-anime-a-partir-dun-film.html" rel="bookmark" title="Permalink to Faire un gif animé à partir d'un film">Faire un gif animé à partir d'un film</a></li>
            </ol>
            </section><!-- #article-list -->

    <hr />
    <a href="feeds/all.atom.xml">Atom feed</a></li>

    <footer id="contentinfo" class="body">
        <address id="about" class="vcard body">
        Generated by <a href="http://getpelican.com/">pelican</a>,
        theme <a href="https://github.com/chmduquesne/small">small</a>
        </address><!-- /#about -->
    </footer><!-- /#contentinfo -->
</body>
</html>